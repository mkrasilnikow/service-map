# Service Map Editor

> [English version](./README.en.md)

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –∫–∞—Ä—Ç –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤. –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ö–µ–º—ã —Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

## –û –ø—Ä–æ–µ–∫—Ç–µ

Service Map Editor ‚Äî —ç—Ç–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ SPA-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ React + TypeScript –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –¥–∏–∞–≥—Ä–∞–º–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã. –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- **–í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä** ‚Äî SVG-—Ö–æ–ª—Å—Ç —Å drag & drop —É–∑–ª–æ–≤ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ —Å–≤—è–∑—è–º–∏
- **7 —Ç–∏–ø–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤** ‚Äî Spring Boot, Node.js, MongoDB, Kafka, Redis, PostgreSQL, External
- **7 —Ç–∏–ø–æ–≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π** ‚Äî REST, SOAP, gRPC, GraphQL, pub/sub, db, cache (–æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ –±–µ–π–¥–∂–∏ –Ω–∞ —Å—Ç—Ä–µ–ª–∫–∞—Ö)
- **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ namespace** ‚Äî —Å–µ—Ä–≤–∏—Å—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º namespace –æ–±–≤–æ–¥—è—Ç—Å—è –ø—É–Ω–∫—Ç–∏—Ä–Ω—ã–º –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–º
- **–ò–º–ø–æ—Ä—Ç/–≠–∫—Å–ø–æ—Ä—Ç** ‚Äî service-schema JSON, schema-export JSON, Mermaid (.md), PDF (A3 landscape)
- **–°–≤–µ—Ç–ª–∞—è/—Ç—ë–º–Ω–∞—è —Ç–µ–º–∞** ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –≤ —Ç—É–ª–±–∞—Ä–µ, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
- **–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏** ‚Äî Delete/Backspace –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è, Escape –¥–ª—è —Å–±—Ä–æ—Å–∞ —Ä–µ–∂–∏–º–∞
- **–ê–≤—Ç–æ-layout** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É–∑–ª–æ–≤ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ service-schema

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫)

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/mkrasilnikow/service-map.git
cd service-map

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç—å dev-—Å–µ—Ä–≤–µ—Ä
npm run dev
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:5173`.

### –ö–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞           | –û–ø–∏—Å–∞–Ω–∏–µ                          |
| ----------------- | --------------------------------- |
| `npm run dev`     | –ó–∞–ø—É—Å–∫ dev-—Å–µ—Ä–≤–µ—Ä–∞ —Å HMR          |
| `npm run build`   | –°–±–æ—Ä–∫–∞ –¥–ª—è production             |
| `npm run preview` | –ü—Ä–µ–≤—å—é production-—Å–±–æ—Ä–∫–∏          |
| `npm run lint`    | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ —á–µ—Ä–µ–∑ ESLint        |

## –î–µ–ø–ª–æ–π –Ω–∞ Vercel

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Vercel –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ [Vercel Dashboard](https://vercel.com/new).
2. Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç Vite-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `vercel.json`.
3. –ù–∞–∂–º–∏—Ç–µ **Deploy**.

–ò–ª–∏ —á–µ—Ä–µ–∑ CLI:

```bash
npx vercel --prod
```

## –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø —Å–µ—Ä–≤–∏—Å–∞

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–æ–∫ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–≤—É—Ö —à–∞–≥–æ–≤:

### –®–∞–≥ 1 ‚Äî –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á —Ç–∏–ø–∞

–í —Ñ–∞–π–ª–µ `src/types/index.ts` –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á –≤ union `NodeTypeKey`:

```typescript
export type NodeTypeKey =
  | 'spring-boot'
  | 'nodejs'
  // ...
  | 'my-new-type';  // ‚Üê –¥–æ–±–∞–≤–∏—Ç—å –∑–¥–µ—Å—å
```

### –®–∞–≥ 2 ‚Äî –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

–í —Ñ–∞–π–ª–µ `src/constants/nodeTypes.ts` –¥–æ–±–∞–≤—å—Ç–µ –∑–∞–ø–∏—Å—å –≤ –æ–±—ä–µ–∫—Ç `NODE_TYPES`:

```typescript
'my-new-type': {
  label: 'My Service',
  color: '#a78bfa',        // –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç (–∞–∫—Ü–µ–Ω—Ç)
  bgLight: '#ede9fe',      // —Ñ–æ–Ω –∫–∞—Ä—Ç–æ—á–∫–∏ (—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞)
  bgDark: '#1e1044',       // —Ñ–æ–Ω –∫–∞—Ä—Ç–æ—á–∫–∏ (—Ç—ë–º–Ω–∞—è —Ç–µ–º–∞)
  borderLight: '#8b5cf6',  // —Ä–∞–º–∫–∞ (—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞)
  borderDark: '#8b5cf6',   // —Ä–∞–º–∫–∞ (—Ç—ë–º–Ω–∞—è —Ç–µ–º–∞)
  icon: 'üîÆ',             // –∏–∫–æ–Ω–∫–∞-—ç–º–æ–¥–∑–∏
  dashed: false,           // –ø—É–Ω–∫—Ç–∏—Ä–Ω–∞—è —Ä–∞–º–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
},
```

–í—Å—ë ‚Äî –Ω–æ–≤—ã–π —Ç–∏–ø –ø–æ—è–≤–∏—Ç—Å—è –≤ –º–æ–¥–∞–ª–∫–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è, —Å–µ–ª–µ–∫—Ç–æ—Ä–µ —Ç–∏–ø–æ–≤ –≤ sidebar –∏ –≤ –ª–µ–≥–µ–Ω–¥–µ.

## –§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ service-schema

–î–ª—è –∏–º–ø–æ—Ä—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç `service-schema`:

```json
{
  "version": "1.0",
  "services": [
    {
      "id": "user-service",
      "name": "User Service",
      "type": "spring-boot",
      "namespace": "backend",
      "integrations": [
        {
          "target": "postgres-users",
          "type": "db",
          "label": "read/write"
        }
      ]
    },
    {
      "id": "postgres-users",
      "name": "Users DB",
      "type": "postgresql",
      "namespace": "databases"
    }
  ]
}
```

### –ü–æ–ª—è —Å–µ—Ä–≤–∏—Å–∞

| –ü–æ–ª–µ           | –¢–∏–ø      | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ | –û–ø–∏—Å–∞–Ω–∏–µ                                               |
| -------------- | -------- | ------------ | ------------------------------------------------------ |
| `id`           | string   | –¥–∞           | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä                                |
| `name`         | string   | –¥–∞           | –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è                                       |
| `type`         | string   | –¥–∞           | –¢–∏–ø: `spring-boot`, `nodejs`, `mongodb`, `kafka`, `redis`, `postgresql`, `external` |
| `namespace`    | string   | –Ω–µ—Ç          | –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ –ø—É–Ω–∫—Ç–∏—Ä–Ω—ã–π –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫) |
| `integrations` | array    | –Ω–µ—Ç          | –°–ø–∏—Å–æ–∫ –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–≤—è–∑–µ–π                                |

### –ü–æ–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

| –ü–æ–ª–µ     | –¢–∏–ø    | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ | –û–ø–∏—Å–∞–Ω–∏–µ                                                  |
| -------- | ------ | ------------ | --------------------------------------------------------- |
| `target` | string | –¥–∞           | ID —Ü–µ–ª–µ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞                                       |
| `type`   | string | –Ω–µ—Ç          | –¢–∏–ø: `REST`, `SOAP`, `gRPC`, `GraphQL`, `pub/sub`, `db`, `cache` |
| `label`  | string | –Ω–µ—Ç          | –ü–æ–¥–ø–∏—Å—å –Ω–∞ —Å—Ç—Ä–µ–ª–∫–µ                                        |

–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä: [`examples/service-schema-example.json`](./examples/service-schema-example.json)

## –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

| –ö–ª–∞–≤–∏—à–∞            | –î–µ–π—Å—Ç–≤–∏–µ                                    |
| ------------------ | ------------------------------------------- |
| `Delete` / `Backspace` | –£–¥–∞–ª–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —É–∑–µ–ª –∏–ª–∏ —Å–≤—è–∑—å       |
| `Escape`           | –°–±—Ä–æ—Å–∏—Ç—å —Ä–µ–∂–∏–º, —Å–Ω—è—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ             |

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
  components/
    Canvas/           # SVG-—Ö–æ–ª—Å—Ç —Å –Ω–æ–¥–∞–º–∏, —Ä—ë–±—Ä–∞–º–∏ –∏ namespace-–≥—Ä—É–ø–ø–∞–º–∏
    Toolbar/          # –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (—Ä–µ–∂–∏–º—ã, –∫–Ω–æ–ø–∫–∏, —Ç–µ–º–∞)
    Sidebar/          # –ü–∞–Ω–µ–ª—å —Å–≤–æ–π—Å—Ç–≤ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
    NodeCard/         # –í–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–¥–Ω–æ–≥–æ —É–∑–ª–∞
    EdgeLine/         # –í–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–≤—è–∑–∏ —Å –±–µ–π–¥–∂–µ–º —Ç–∏–ø–∞
    modals/
      AddNodeModal/   # –ú–æ–¥–∞–ª–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É–∑–ª–∞
      ExportModal/    # –ú–æ–¥–∞–ª–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ (Mermaid, JSON, PDF)
      ImportModal/    # –ú–æ–¥–∞–ª–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ (service-schema, schema-export)
  hooks/
    useGraph.ts       # –õ–æ–≥–∏–∫–∞ –≥—Ä–∞—Ñ–∞ (—É–∑–ª—ã, —Ä—ë–±—Ä–∞, CRUD, selection)
    useDrag.ts        # Drag & drop —É–∑–ª–æ–≤ –Ω–∞ SVG-—Ö–æ–ª—Å—Ç–µ
    useKeyboard.ts    # –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
  types/
    index.ts          # TypeScript-—Ç–∏–ø—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
  constants/
    nodeTypes.ts      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤ (—Ü–≤–µ—Ç–∞, –∏–∫–æ–Ω–∫–∏)
    edgeTypes.ts      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
  utils/
    layout.ts         # –ê–≤—Ç–æ-layout –∞–ª–≥–æ—Ä–∏—Ç–º (LR)
    export.ts         # –≠–∫—Å–ø–æ—Ä—Ç –≤ Mermaid, PDF, schema-export JSON
    import.ts         # –ò–º–ø–æ—Ä—Ç service-schema –∏ schema-export
    schema.ts         # JSON Schema –≤–∞–ª–∏–¥–∞—Ü–∏—è service-schema
  App.tsx             # –ö–æ—Ä–Ω–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
  main.tsx            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
  index.css           # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏ CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–µ–º
```
